<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/iron-icon/iron-icon.html">
<link rel="import" href="../../bower_components/moment-js/moment-js.html">


<link rel="import" href="../../bower_components/sc-style/sc-style.html">
<link rel="import" href="../../bower_components/sc-iconset/sc-iconset.html">

<link rel="import" href="../sc-avatar/sc-avatar.html">
<link rel="import" href="../sc-hashtagcontract/sc-hashtagrep.html">


<!--
`sc-hashtagitem`

This components is the representation of a request in the requests-list on sc-hashtag. 

@demo src/sc-hashtagitem/demo/index.html 
-->

<dom-module id="sc-hashtagitem">
  <template>
    <style include="sc-styles">
      :host {
        display: block;
        width: 100%;
        box-sizing:border-box;
        padding: 25px;
        @apply(--base-shadow); 
        background-color: rgba(255,255,255,1);
      }


      .smalltxt {
        font-size: 14px;
        line-height: 16px;
      }

      .whodidthis {
        margin-right: 16px;
      }

      .categorie {
        box-sizing:border-box;
        padding: 4px 4px 4px 4px; 
        font-size: 14px;
        line-height: 16px;
      }

/*      .offertime {

      }*/


      .margtop {
        margin-top: 6px;     
      }

      .margbot {
       margin-bottom: 6px;
      }

      .linehi {
        line-height: 22px;
      }

      .timestamp {
        margin: 0px 4px 6px 0px;     
      }

      .replyitem {
        box-sizing:border-box;
        margin-top: 10px;
      }



      sc-avatar { 
        margin-right: 10px;
        height: 28px;
      }


      .offerer {
        margin-top: 2px;

      }
      
      .offer {
          font-size: 16px;
          line-height: 22px;
          /*margin: 5px 0px 15px 0px;*/
      }


      .offeramount {
          font-size: 30px;
          line-height: 30px;
      }

      .offeramountSWT {
          font-size: 15px;
          line-height: 15px;
      }

      .nrofreplies {
        box-sizing:border-box;
        margin: 2px 0px 10px 0px;
      }

      .nrofreplies iron-icon {
        width: 17px;
        height: 13px;
        margin-bottom: 2px;
      }

      @media all and (min-width: 0) and (max-width: 420px) { 
      
        .smalltxt {
          font-size: 13px;
          line-height: 17px;
        }

      }

    </style>
 

      <div class="totalwidth vertic start startjust" on-tap="toDetail">

        <small class="small grey3 light">
          <moment-js date="{{item.offertime}}" format="HH:mm:ss.SSS" from-now></moment-js>
        </small>
        <p class="totalwidth offer grey4"> {{item.msg}} <span class="semibold"> 
          #{{item.hashtag}}</span></p>
        <template is="dom-if" if="{{showreplies}}">
          <div class="nrofreplies horizont start startjust">
            <p class="small reg grey3">{{item.replies.length}}</p>
            <iron-icon icon="sc-icons:babble" class="grey3">replies</iron-icon>
          </div>
        </template>
        <template is="dom-if" if="{{!showreplies}}">
          <div class="nrofreplies noneyet horizont start startjust">
            <p class="small reg grey2">0</p>
            <iron-icon icon="sc-icons:babble" class="grey2">replies</iron-icon>
          </div>
        </template>

        <div class="minispace"></div>
        <div class="minispace"></div>

        <div class="totalwidth horizont start startjust">
          <sc-avatar
            ipfshash="[[item.seeker.avatar]]"
            size="verysmall">
          </sc-avatar>
          <div class="flex vertic centercenter">
            <p class="totalwidth offerer small bold grey3">{{item.seeker.username}}</p>
            <p class="totalwidth yourrep small bold blue"><sc-hashtagrep pubkey="{{item.seeker.pubkey}}" hashtagname="{{item.hashtag}}"></sc-hashtagrep> REP</p>
          </div>

<!--         <div class="totalwidth horizont centercenter">
          <div class="flex"></div> -->
          <p class="offeramount bold yellow">{{item.amount}}<span class="offeramountSWT">SWT</span></p>
<!--         </div> -->




        </div>
      </div>




  </template>

  <script>
    Polymer({

      is: 'sc-hashtagitem',

      properties: {
        /**
       * `` .
       */
        item: {
          type: Object
        },
      },

      ready: function(){
      },

      /**
      * 'onEnter' are the behaviors that occur when the router tells this component enters the stage 
      * use this to initialize any variables to start the component
      */
      onEnter: function(){
      },

      /**
      * 'onExit' are the behaviors that occur when the router tells this component to leave the stage 
      * use this to reset any variables when leaving this component while it remains loaded.
      */
      onExit: function(){
      },

      toDetail: function(){
        this.fire('to-detail',this.item);
      },

      toLocaltime: function(target){
        // console.log("HEY MISTER? got the tiiiimmmmmeeeeee",target);

      }

    });
  </script>
</dom-module>
