<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/iron-icon/iron-icon.html">
<link rel="import" href="../../bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="../../bower_components/paper-input/paper-input.html">
<link rel="import" href="../../bower_components/paper-input/paper-textarea.html">

<link rel="import" href="../../bower_components/sc-style/sc-style.html">
<link rel="import" href="../../bower_components/sc-iconset/sc-iconset.html">

<!--
`sc-newitem`

This component lets a Swarm Citizen create a new offer under the selected hashtag.

@demo src/sc-newitem/demo/index.html 
-->

<dom-module id="sc-newitem">
<link rel="import" href="../../bower_components/sc-style/sc-style.css" type="css">
  <template>
    <style>
      :host {
        display: block;
        width: 100%;
        min-height: 100%;
      }

      .topbar {
        height: 14%;
        min-height: 82px;
        box-sizing:border-box;
        padding: 40px 50px 0px 50px;
      }

      .paddingsides {
        padding-left: 12vw;
        padding-right: 12vw;
      }


      .avatar-box {
        z-index: 2;
        box-sizing:border-box;
        margin-right: 14px;     
      }

      .rep {
        font-size: 14px;
      }

      .amount {
        font-size: 36px;
      }

      .swt {
        font-size: 18px;
      }


      paper-input.swtamount {
        --paper-input-container-input: {
          @apply(--montserrat-bold);
          font-size: 24px;
          line-height: 24px;
          color: var(--sc-yellow);
        };
        --paper-input-container-focus-color: var(--sc-yellow);
      }

      .padder {
        box-sizing:border-box;
        padding: 20px;    
      }

      .amountinput {
        width: 100px;
      }


      .yourname {
        margin-bottom: 4px;
      }

      .offeramount {
        width: 50%;
      }

      .swtwithoffer {
        font-size: 12px;
        line-height: 12px;
      }



    </style>
  <div class="totalwidth vertic centercenter">

      <div class="topbar whiteback" id="topbar">
        <span class="flex"></span>
        <div class="balance-box" id="balancebox">
          <p class="grey1">?</p>
        </div>
        <iron-icon on-tap="toHashtag" id="backbtn" icon="sc-icons:decline" class="decliner grey2 big">back</iron-icon>
      </div> 

      <div class="totalwidth whiteback" id="detailcontent">
        <div class="totalwidth horizont centercenter paddingsides">
          <div class="avatar-box">
            <sc-avatar
              id="avatarimg"
              identity="{{identity}}"
              pubkey="{{account}}"
              mode="imgonly"
              size="medium"
              on-tap="leave">
            </sc-avatar>
          </div>

          <div class="vertic start startjust flex">
            <sc-username
              id="username"
              identity="{{identity}}"
              pubkey="{{account}}"
              size="medium"
              on-tap="leave">
            </sc-username>

            <p class="bold rep blue">{{offererrep}} REP</p>
              <ac-balance               
                refcur="EUR"
                arcbalance="{{arcbalance}}"
                ethbalance="{{ethbalance}}"
                showswt="false"
                viewmode="verysmall">
              </ac-balance>
          </div>  
        </div>

        <div class="totalwidth paddingsides vertic centercenter">
          <div class="totalwidth vertic start centerjust">
            <div class="whitespace"></div>
            <paper-textarea label="Description" class="totalwidth" autofocus value="{{offermsg}}">
            </paper-textarea>
            <div class="totalwidth horizont center endjust">
              <p class="bold"><span>#</span>{{selectedhashtag}}</p>
            </div>

            <div class="totalwidth horizont end startjust">
              <paper-input class="offeramount swtamount" value="{{replyamount}}">
              <div suffix class="yellow bold swtwithoffer">SWT</div>
              </paper-input>
            </div>
          </div>
          <div class="whitespace"></div>
          <div class="whitespace"></div>
          <paper-button noink class="bigbtn blueback white">post this offer</paper-button>
          <div class="whitespace"></div>
          <div class="whitespace"></div>
          <div class="whitespace"></div>
        </div>
      </div> 
  </div> 

  </template>

  <script>
    Polymer({

      is: 'sc-newitem',

      properties: {
        /**
       * `prop1` this is the first property and what it does is described right here.
       */
        sharedElements: {
          type: Object,
          value: function() {
            return {
              'hero': this.$.avatarimg,
              'balance': this.$.balancebox
            }
          }
        },
        
      animationConfig: {
        type: Object,
        value: function() {
          return {
            'entry': [{
              name: 'slide-from-right-animation',
              node:this.$.detailcontent,
              toPage: this,
              timing: {
                duration: 600
              }
            },{
              name: 'slide-from-right-animation',
              node:this.$.topbar,
              fromPage: this,
              timing: {
                duration: 600
              }
            },{
              name: 'fade-in-animation',
              node:this.$.backbtn,
              fromPage: this,
              timing: {
                duration: 200
              }
            },{
              name: 'fade-in-animation',
              node:this.$.username,
              fromPage: this,
              timing: {
                duration: 200
              }
            }, {
              name: 'hero-animation',
              id: 'hero',
              toPage: this,
              timing: {
                  duration: 200
              }
            }, {
              name: 'hero-animation',
              id: 'balance',
              toPage: this,
              timing: {
                  duration: 200
              }
            }],

            'exit': [{
              name: 'fade-out-animation',
              node:this.$.detailcontent,
              fromPage: this,
              timing: {
                duration: 125
              }

            },{
              name: 'fade-out-animation',
              node:this.$.backbtn,
              fromPage: this,
              timing: {
                duration: 125
              }

            },{
              name: 'fade-out-animation',
              node:this.$.topbar,
              fromPage: this,
              timing: {
                duration: 125
              }
            }, {
              name: 'hero-animation',
              id: 'hero',
              fromPage: this,
              timing: {
                  duration: 600
              }

            }, {
              name: 'hero-animation',
              id: 'balance',
              fromPage: this,
              timing: {
                  duration: 600
              }
              }]
            }
          },
        }


      },

      ready: function(){
      // DUMMY!!!
      this.selectedhashtag = "pioneer";
      this.onEnter();

      },

      /**
      * 'onEnter' are the behaviors that occur when the router tells this component enters the stage 
      * use this to initialize any variables to start the component
      */
      onEnter: function(){
        // this.replystate = 'init';
        // this.bgcolor = "whiteback";
        // this.bordertop = "greytopborder";
      },

      /**
      * 'onExit' are the behaviors that occur when the router tells this component to leave the stage 
      * use this to reset any variables when leaving this component while it remains loaded.
      */
      onExit: function(){
      },


      leave: function(){
        this.fire('leave');
      },
      toHashtag: function(){
        this.fire('to-hashtag');
      },





    });
  </script>
</dom-module>
